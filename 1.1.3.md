#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

// -------------------------- 新增：结构体与全局变量定义 -------------------------
#define MAX_EVENTS 100   // 最大事件数量
#define MAX_NAME 50       // 事件名称最大长度
#define MAX_DATE 20       // 日期字符串最大长度（格式：YYYY-MM-DD）
#define MAX_TIME 10       // 时间字符串最大长度（格式：HH:MM）
#define MAX_DESC 100      // 事件描述最大长度

// 事件结构体（原框架隐含定义，此处显式实现）
struct Event {
    char name[MAX_NAME];
    char date[MAX_DATE];
    char time[MAX_TIME];
    char description[MAX_DESC];
};

struct Event events[MAX_EVENTS];  // 事件数组
int eventCount = 0;               // 当前事件数量
int running = 1;                  // 程序运行状态（原框架隐含变量）

// -------------------------- 新增：工具函数（日期校验、菜单显示等） -------------------------
// 校验日期格式是否合法（YYYY-MM-DD）
int isValidDate(const char* date) {
    if (strlen(date) != 10) return 0;
    if (date[4] != '-' || date[7] != '-') return 0;
    int year = atoi(date);
    int month = atoi(date + 5);
    int day = atoi(date + 8);
    return (year >= 2025 && month >= 1 && month <= 12 && day >= 1 && day <= 31); // 简化校验
}

// 显示主菜单（原框架函数补充实现）
void showMenu() {
    system("clear"); // 清屏（Windows用"cls"，Linux/macOS用"clear"）
    printf("==================== 日程管理系统 ====================\n");
    printf("当前时间: %s", ctime(&time(NULL))); // 显示系统当前时间
    printf("----------------------------------------------------\n");
    printf("1. 日期管理       2. 事件增删改查       3. 提醒功能\n");
    printf("4. 保存事件数据   5. 退出系统\n");
    printf("====================================================\n");
    printf("请输入选择 (1-5): ");
}
